webpackJsonp([22],{GKNp:function(t,e){},ZVNI:function(t,e,a){"use strict";var s={name:"vm-emerge-line",props:{data:{type:Array,default:function(){return[{statistics_time:"2000-01-01 12:00",alert_count:0}]}}},mounted:function(){this.drawLine()},methods:{drawLine:function(){var t=this.data;t=t.reverse();var e=this.$echarts.init(document.getElementById("emergeLine"));e.setOption({grid:{top:"18%",left:"2%",right:"4%",bottom:"18%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#ddd"}},backgroundColor:"rgba(255,255,255,1)",padding:[5,10],textStyle:{color:"#7588E4"},extraCssText:"box-shadow: 0 0 5px rgba(0,0,0,0.3)"},xAxis:{axisLine:{lineStyle:{color:"#ECECEC",width:2}},axisLabel:{textStyle:{color:"#666666"},formatter:function(t){var e=t.split(" "),a="";return"0"!=t&&(a=e[0]+"\n"+e[1]),a}},axisTick:{show:!1},data:t.map(function(t){return t.statistics_time})},yAxis:{splitLine:{show:!0,lineStyle:{color:["#F4F4F4"],width:1,type:"solid"}},axisLine:{lineStyle:{color:"#ECECEC",width:2}},axisLabel:{textStyle:{color:"#666666"}},axisTick:{show:!1}},dataZoom:[{show:!0,type:"inside",realtime:!0,start:0,end:100},{type:"slider",backgroundColor:"#fff",fillerColor:"rgba(0,112,255,.1)",handleStyle:{color:"#0070ff"},dataBackground:{areaStyle:{shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:10}}}],series:{name:"告警",type:"line",smooth:!0,showSymbol:!1,symbolSize:0,animation:!0,lineStyle:{normal:{width:2,color:"#DC5F5F",opacity:.5}},symbol:"circle",areaStyle:{color:"#DC5F5F",opacity:.12},data:t.map(function(t){return t.alert_count})}}),window.addEventListener("resize",function(){e.resize()})}}},l={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vm-emerge-line",attrs:{id:"emergeLine"}})},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(t){a("GKNp")},"data-v-373fe9fc",null);e.a=i.exports},dbBn:function(t,e,a){"use strict";(function(t){var s=a("lHA8"),l=a.n(s),i=a("Gu7T"),n=a.n(i),o=a("fZjL"),r=a.n(o),c=a("ZVNI"),_=a("zQWo"),d=a("5Xf9");e.a={name:"Network",components:{vmEmergeLine:c.a,vmEmergePicker:_.a},data:function(){return{echarts_data:{},e_line:{loading:!0,data_show:!1},picker_data:{time:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)]},params:{key:"",threat:"",status:"",startTime:"",endTime:"",degree:""},options_degrees:[{value:"low",label:"低危"},{value:"medium",label:"中危"},{value:"high",label:"高危"}],options_threat:[{value:"1",label:"已失陷"}],options_status:[{value:"all",label:"所有"},{value:"0",label:"新告警"},{value:"1",label:"待处置"},{value:"2",label:"处置中"},{value:"3",label:"已处置"},{value:"4",label:"已忽略"},{value:"5",label:"误报"}],edit_tag:{tag_list:[],pop:!1},table:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10,multipleSelection:[],loading:!0},state_change:!1,process_state:"",task:{new:!1,new_contet:!0},task_params:{name:"",level:"",operator:"",new_operator:[],notice:["email"],textarea:"",multiple:[],remind:["email"]},task_new:{level_list:[{value:"highest",label:"最高"},{value:"high",label:"高"},{value:"medium",label:"中"},{value:"low",label:"低"}],operator_list:[]},table_operator:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10},handle:{add:"",table_title:["告警"],active:0,save:!1},table_alerts:{tableData:[],tableData_new:[],count:0,pageNow:1,maxPage:1,eachPage:10,multipleSelection:[]},add_state_change:!1,table_add_works:{tableData:[],count:0,pageNow:1,maxPage:1,eachPage:10,loading:!0,multipleSelection:[]},detail_click_val:{},detail_click_column:{},add_params:{name:"",level:"",operator:[],notice:["email"],remarks:"",multiple:[],old_as:[]},oldPositon:{x:"",y:""},newPositon:{x:"",y:""}}},mounted:function(){this.check_passwd(),this.get_echarts(),this.get_list_risk()},methods:{check_passwd:function(){var t=this;this.$axios.get("/yiiapi/site/check-passwd-reset").then(function(e){var a=e.data,s=a.status,l=a.msg;a.data;"602"==s&&(t.$message({message:l,type:"warning"}),d.a.$emit("reset"))})},get_echarts:function(){var t=this;this.$axios.get("/yiiapi/alert/alert-trend").then(function(e){t.e_line.loading=!1,t.e_line.data_show=!0,e.data.data?t.echarts_data=e.data.data:t.echarts_data=[{statistics_time:"",alert_count:0}]}).catch(function(t){console.log(t)})},get_list_risk:function(){var t=this;this.table.loading=!0;var e={threat:""};1==this.params.threat&&(e.threat=1),this.$axios.get("/yiiapi/alert/list",{params:{start_time:this.params.startTime,end_time:this.params.endTime,key_word:this.params.key,fall_certainty:e.threat,status:this.params.status,degree:this.params.degree,page:this.table.pageNow,rows:this.table.eachPage}}).then(function(e){t.table.loading=!1;var a=e.data,s=a.status,l=a.data;if(0==s){var i=l.data,n=l.count,o=l.maxPage,r=l.pageNow;t.table.tableData=i,t.table.count=n,t.table.maxPage=o,t.table.pageNow=r}}).catch(function(t){console.log(t)})},changeTime:function(t){t?(this.params.startTime=(t[0].valueOf()/1e3).toFixed(0),this.params.endTime=(t[1].valueOf()/1e3).toFixed(0)):(this.params.startTime="",this.params.endTime="")},submitClick:function(){this.table.pageNow=1,this.get_list_risk()},resetClick:function(){this.params={key:"",threat:"",status:"",startTime:"",endTime:"",degree:""},t(document.querySelector(".el-button--text")).trigger("click"),this.table.pageNow=1,this.get_list_risk()},handleSizeChange:function(t){this.table.eachPage=t,this.table.pageNow=1,this.get_list_risk()},handleCurrentChange:function(t){this.table.pageNow=t,this.get_list_risk()},handleSelChange:function(t){this.table.multipleSelection=t},detail_click:function(t,e,a){this.detail_click_val=t,this.detail_click_column=e},header_click:function(t){this.detail_click_val={}},mousedown:function(t){this.oldPositon={x:"",y:""},this.newPositon={x:"",y:""},this.oldPositon.x=t.clientX,this.oldPositon.y=t.clientY},mouseup:function(t){var e=this;this.newPositon.x=t.clientX,this.newPositon.y=t.clientY,this.oldPositon.x==this.newPositon.x?setTimeout(function(){e.detail_click_val.id?(console.log("点击详情"),0!=r()(e.detail_click_column).length&&"selection"!=e.detail_click_column.type&&e.$router.push({path:"/detail/network",query:{detail:e.detail_click_val.id,type:"alert"}})):console.log("点击头部")},10):console.log("复制")},change_state:function(t){this.process_state=t,this.open_state()},change_task:function(t){"新建工单"==t?this.open_task_new():"添加到工单"==t&&this.open_add_new()},open_state:function(){if(0==this.table.multipleSelection.length)return this.$message({message:"请选择需要变更的告警！",type:"warning"}),!1;this.state_change=!0},closed_state:function(){this.state_change=!1,this.$refs.multipleTable.clearSelection()},cancel_state:function(){this.closed_state()},ok_state:function(){var t=this,e=this.table.multipleSelection.map(function(t){return t.id}),a=this.process_state,s=0;"处置中"==a?s=2:"已处置"==a?s=3:"已忽略"==a?s=4:"误报"==a&&(s=5),this.$axios.put("/yiiapi/alert/do-alarm",{id:e,status:s}).then(function(e){var a=e.data,s=a.status,l=a.msg;a.data;0==s?(t.$message.success("告警状态变更成功！"),t.closed_state(),t.get_list_risk()):""==l?t.$message.error(l):t.$message.error("状态变更失败")}).catch(function(t){console.log(t)})},open_task_new:function(){var t=this,e=this.table.multipleSelection,a=e.map(function(t){return t.status});if(0==e.length)return this.$message({message:"请选择需要编辑的告警！",type:"warning"}),!1;if(a.includes("3")||a.includes("4")||a.includes("5"))this.$message({message:"告警状态为已处置、已忽略、误报的不能新建。",type:"warning"});else{this.table_alerts.tableData=e,this.table_alerts.count=e.length;var s=this.table_alerts.eachPage,l=this.table_alerts.tableData.slice(0,s);this.table_alerts.tableData_new=l,this.$axios.get("/yiiapi/site/user-list").then(function(e){var a=e.data,s=a.status,l=a.data;t.task_new.operator_list=0==s?l:[],t.task.new=!0,t.task.new_contet=!0}).catch(function(t){console.log("用户列表错误"),console.log(t)})}},closed_task_new:function(){this.task.new=!1,this.task.new_contet=!1,this.task_params={name:"",level:"",operator:"",new_operator:[],notice:["email"],textarea:"",multiple:[],remind:["email"]},this.table_operator.tableData=[],this.table_alerts.tableData_new=[],this.$refs.multipleTable.clearSelection()},next_task_new:function(){var t=new RegExp("[`~!#%$^&*()=|{}':;',\\[\\]<>《》/?~！#￥……&*（）|{}【】‘；：”“'。，、？]");return""==this.task_params.name?(this.$message.error("工单名称不能为空"),!1):t.test(this.task_params.name)?(console.log(!0),this.$message.error("工单名称不能包含特殊字符"),!1):void(""==this.task_params.level?this.$message.error("优先级未选择"):""==this.task_params.operator?this.$message.error("经办人未选择"):(this.task.new_contet=!1,this.handle.active=0))},prev_task_handle:function(){this.task.new_contet=!0},select_changced:function(t){this.table_operator.tableData.map(function(t){return t.id}).includes(t.id)?this.$message.error("已存在"):this.table_operator.tableData.unshift(t);var e=this.table_operator.tableData.map(function(t){return t.username});this.task_params.new_operator=e},sc_table_alerts:function(t){this.table_alerts.eachPage=t,this.table_alerts.pageNow=1;var e=this.table_alerts.tableData.slice(0,t);this.table_alerts.tableData_new=e},hcc_table_alerts:function(t){this.table_alerts.pageNow=t;var e=this.table_alerts.eachPage,a=this.table_alerts.tableData.slice((t-1)*e,t*e);this.table_alerts.tableData_new=a},handle_sel_table_alerts:function(t){this.table_alerts.multipleSelection=t;var e=t.map(function(t){return 1*t.id});this.task_params.multiple=e},table_btn_toggle:function(t){this.handle.active=t},prev_task_handle_assign:function(){var t=this;if(0==this.task_params.multiple.length){var e=this.table.multipleSelection.map(function(t){return 1*t.id});this.task_params.multiple=e}console.log(this.task_params.multiple),this.handle.save=!0,this.$axios.put("/yiiapi/alert/distribution-workorder",{name:this.task_params.name,priority:this.task_params.level,perator:this.task_params.new_operator,remarks:this.task_params.textarea,te_alert:this.task_params.multiple,remind:this.task_params.notice}).then(function(e){t.handle.save=!1;var a=e.data,s=a.status,l=a.msg;a.data;0==s?(t.$message.success("分配成功"),t.closed_task_new(),t.get_list_risk()):1==s&&t.$message.error(l)}).catch(function(t){console.log(t)})},prev_task_handle_save:function(){var t=this;if(0==this.task_params.multiple.length){this.table.multipleSelection;var e=this.table.multipleSelection.map(function(t){return 1*t.id});this.task_params.multiple=e}this.handle.save=!0,this.$axios.post("/yiiapi/alert/add-workorder",{name:this.task_params.name,priority:this.task_params.level,perator:this.task_params.new_operator,remarks:this.task_params.textarea,te_alert:this.task_params.multiple,remind:this.task_params.notice}).then(function(e){t.handle.save=!1;var a=e.data,s=a.status,l=a.msg;a.data;0==s?(t.$message.success("保存成功"),t.closed_task_new(),t.get_list_risk()):1==s&&t.$message.error(l)}).catch(function(t){console.log(t)})},open_add_new:function(){this.add_open_state()},add_open_state:function(){var t=this.table.multipleSelection,e=t.map(function(t){return t.status});if(0==t.length)return this.$message({message:"请选择需要添加到工单的告警！",type:"warning"}),!1;e.includes("3")||e.includes("4")||e.includes("5")?this.$message({message:"告警状态为已处置、已忽略、误报的不能添加到工单。",type:"warning"}):(this.add_state_change=!0,this.get_table_works_list())},add_closed_state:function(){this.add_state_change=!1,this.add_params={name:"",level:"",operator:"",new_operator:[],notice:["email"],textarea:"",multiple:[],old_as:[]},this.$refs.multipleTable.clearSelection()},get_table_works_list:function(){var t=this;this.$axios.get("/yiiapi/alert/workorder-list",{params:{page:this.table_add_works.pageNow,rows:this.table_add_works.eachPage}}).then(function(e){console.log(e),t.table_add_works.loading=!1;var a=e.data,s=a.status,l=a.data;if(0==s){var i=l.data,n=l.count,o=l.maxPage,r=l.pageNow;i.map(function(t,e){t.new_perator=JSON.parse(t.perator).join(","),t.checked=!1}),t.table_add_works.tableData=i,t.table_add_works.count=n,t.table_add_works.maxPage=o,t.table_add_works.pageNow=Number(r)}})},handle_sel_table_add_works:function(t){console.log(t),this.table_add_works.multipleSelection=t},add_ok_state:function(){var t=this,e=this.table.multipleSelection.map(function(t){return 1*t.id});this.add_params.multiple=e;var a=this.table_add_works.multipleSelection;if(0==a.length)this.$message({message:"请选择需要添加的工单！",type:"warning"});else if(a.length>1)this.$message({message:"资产/告警不能添加到多个工单，请重新选择！",type:"warning"});else{console.log("******************"),this.add_params.id=a[0].id,this.add_params.name=a[0].name,this.add_params.level=a[0].priority,this.add_params.perator=JSON.parse(a[0].perator),this.add_params.remarks=a[0].remarks,this.add_params.remind=JSON.parse(a[0].remind),this.add_params.old_as=JSON.parse(a[0].te_alert),this.add_params.multiple=[].concat(n()(this.add_params.multiple),n()(this.add_params.old_as)),console.log(this.add_params.multiple),this.add_params.multiple=[].concat(n()(new l.a(this.add_params.multiple)));var s=this.add_params.multiple.filter(function(t){return t});this.add_params.multiple=s,console.log(this.add_params.remind),console.log(this.add_params.perator),this.handle.save=!0,this.$axios.post("/yiiapi/alert/add-workorder",{id:this.add_params.id,type:"alert",name:this.add_params.name,priority:this.add_params.level,perator:this.add_params.perator,remind:this.add_params.remind,remarks:this.add_params.remarks,te_alert:this.add_params.multiple}).then(function(e){t.handle.save=!1;var a=e.data,s=a.status,l=a.msg;a.data;0==s?(t.$message.success("添加成功"),t.add_closed_state(),t.get_list_risk()):1==s&&t.$message.error(l)}).catch(function(t){console.log(t)})}},sc_table_add_works:function(t){this.table_add_works.eachPage=t,this.table_add_works.pageNow=1,this.get_table_works_list()},hcc_table_add_works:function(t){this.table_add_works.pageNow=t,this.get_table_works_list()},export_box:function(){var t=this;this.$confirm("是否确定导出告警列表?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.get("/yiiapi/site/check-passwd-reset").then(function(e){var a=e.data,s=a.status,l=a.msg;a.data;"602"==s?(t.$message({message:l,type:"warning"}),d.a.$emit("reset")):t.$axios.get("/yiiapi/site/check-auth-exist",{params:{pathInfo:"yararule/download"}}).then(function(e){var a="/yiiapi/alert/export-alerts?status="+t.params.status+"&start_time="+t.params.startTime+"&end_time="+t.params.endTime+"&fall_certainty="+t.params.threat+"&key_word="+t.params.key;window.location.href=a}).catch(function(t){console.log(t)})})}).catch(function(){t.$message({type:"info",message:"已取消导出"}),t.$refs.multipleTable.clearSelection()})}}}}).call(e,a("7t+N"))},"ow+5":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("dbBn"),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.handle.save,expression:"handle.save",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"Network"}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.e_line.loading,expression:"e_line.loading"}],staticClass:"e_line"},[s("p",{staticClass:"title"},[t._v("实时告警监测")]),t._v(" "),t.e_line.data_show?s("vm-emerge-line",{attrs:{data:t.echarts_data}}):t._e()],1),t._v(" "),s("div",{staticClass:"alert_risk"},[s("el-form",{staticClass:"common-pattern"},[s("h3",{staticClass:"title"},[t._v("告警监测")]),t._v(" "),s("el-row",{staticClass:"common_box",staticStyle:{padding:"15px 0"}},[s("el-col",{staticClass:"common_box_list",attrs:{span:24}},[s("el-input",{staticClass:"s_key",attrs:{placeholder:"搜索关键词",clearable:""},model:{value:t.params.key,callback:function(e){t.$set(t.params,"key",e)},expression:"params.key"}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),s("vm-emerge-picker",{on:{changeTime:t.changeTime}}),t._v(" "),s("el-select",{staticClass:"s_key s_key_types",attrs:{clearable:"",placeholder:"失陷确定性","popper-append-to-body":!1},model:{value:t.params.threat,callback:function(e){t.$set(t.params,"threat",e)},expression:"params.threat"}},t._l(t.options_threat,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-select",{staticClass:"s_key",attrs:{clearable:"",placeholder:"威胁等级","popper-append-to-body":!1},model:{value:t.params.degree,callback:function(e){t.$set(t.params,"degree",e)},expression:"params.degree"}},t._l(t.options_degrees,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-select",{staticClass:"s_key",attrs:{clearable:"",placeholder:"处理状态","popper-append-to-body":!1},model:{value:t.params.status,callback:function(e){t.$set(t.params,"status",e)},expression:"params.status"}},t._l(t.options_status,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-button",{staticClass:"s_btn",on:{click:function(e){return t.submitClick()}}},[t._v("搜索")]),t._v(" "),s("el-link",{staticClass:"s_link",on:{click:function(e){return t.resetClick()}}},[t._v("重置")]),t._v(" "),s("el-button",{staticClass:"s_btn_edit",on:{click:t.export_box}},[t._v("导出")])],1)],1),t._v(" "),s("el-row",{staticClass:"common_btn"},[s("el-col",{staticClass:"common_btn_list",attrs:{span:24}},[s("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start",size:"148"},on:{command:t.change_state}},[s("el-button",{staticClass:"change_btn",attrs:{type:"primary"}},[s("span",[t._v("状态变更")]),t._v(" "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticClass:"dropdown_ul_box",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"处置中"}},[t._v("处置中")]),t._v(" "),s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"已处置"}},[t._v("已处置")]),t._v(" "),s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"已忽略"}},[t._v("已忽略")]),t._v(" "),s("el-dropdown-item",{staticClass:"select_item",attrs:{command:"误报"}},[t._v("误报")])],1)],1),t._v(" "),s("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.change_task}},[s("el-button",{staticClass:"change_btn",attrs:{type:"primary"}},[s("span",[t._v("工单任务")]),t._v(" "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{staticClass:"dropdown_ul_box",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"新建工单"}},[t._v("新建工单")]),t._v(" "),s("el-dropdown-item",{attrs:{command:"添加到工单"}},[t._v("添加到工单")])],1)],1)],1)],1)],1),t._v(" "),s("el-row",{staticClass:"common-table-pattern"},[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],ref:"multipleTable",staticClass:"common-table",attrs:{align:"center",border:"",data:t.table.tableData,"row-style":{cursor:"pointer"},"tooltip-effect":"dark"},on:{"selection-change":t.handleSelChange,"header-click":t.header_click,"row-click":t.detail_click},nativeOn:{mousedown:function(e){return t.mousedown(e)},mouseup:function(e){return t.mouseup(e)}}},[s("el-table-column",{attrs:{label:" ",align:"center",prop:"type",width:"20"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.row.new_alert,expression:"scope.row.new_alert=='1'"}],staticClass:"new_dot"})]}}])}),t._v(" "),s("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{label:"告警时间",align:"center",width:"200","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("time")(e.row.alert_time)))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"category",align:"center",label:"告警类型",width:"100","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"indicator",align:"center",label:"威胁指标","min-width":"120","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"src_ip",align:"center",label:"源地址","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"dest_ip",align:"center",label:"目的地址","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"application",align:"center",label:"应用",width:"60","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"高"==e.row.degree,mid_background:"中"==e.row.degree,low_background:"低"==e.row.degree}},[t._v("\n                "+t._s(t._f("degree_sino")(e.row.degree)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"失陷确定性",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:{fall_certainty:"1"==e.row.fall_certainty}},[t._v("\n                "+t._s(t._f("certainty")(e.row.fall_certainty)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("alert_status")(e.row.status)))]}}])})],1)],1),t._v(" "),s("el-col",{staticClass:"e-pagination",attrs:{span:24}},[s("el-pagination",{staticClass:"handle-pagination",attrs:{"page-sizes":[10,20,50,100],"page-size":t.table.eachPage,"current-page":t.table.pageNow,total:t.table.count,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),s("el-dialog",{staticClass:"pop_state_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.state_change},on:{"update:visible":function(e){t.state_change=e}}},[s("img",{staticClass:"closed_img",attrs:{src:a("6an9"),alt:""},on:{click:t.closed_state}}),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"mask"}),t._v(" "),s("span",{staticClass:"title_name"},[t._v("状态变更")])]),t._v(" "),s("div",{staticClass:"content"},[s("p",{staticClass:"content_p",staticStyle:{"font-size":"0","text-align":"center"}},[s("span",{staticStyle:{"font-size":"14px"}},[t._v("是否将已勾选的")]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.table.multipleSelection.length))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("项状态变更为“")]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.process_state))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("”?")])])]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.cancel_state}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"ok_btn",on:{click:t.ok_state}},[t._v("确定")])],1)]),t._v(" "),s("el-dialog",{staticClass:"task_new_box pop_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.task.new},on:{"update:visible":function(e){return t.$set(t.task,"new",e)}}},[s("img",{staticClass:"closed_img",attrs:{src:a("6an9"),alt:""},on:{click:t.closed_task_new}}),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"mask"}),t._v(" "),s("span",{staticClass:"title_name"},[t._v("编辑工单")])]),t._v(" "),s("div",{staticClass:"step_box"},[s("div",{staticClass:"step_box1"},[s("span",{staticClass:"step1_span",class:t.task.new_contet?"step_now":"step_past"},[t._v("基本信息")]),t._v(" "),s("img",{staticClass:"selected_img",attrs:{src:a("4CQt"),alt:""}})]),t._v(" "),s("div",{staticClass:"step_box2"},[s("span",{staticClass:"step2_span",class:t.task.new_contet?"step_past":"step_now"},[t._v("处置内容")])])]),t._v(" "),t.task.new_contet?s("div",{staticClass:"task_new_content"},[s("div",{staticClass:"task_content_box"},[s("div",{staticClass:"content_top"},[s("div",{staticClass:"content_top_left"},[s("li",{staticClass:"left_item"},[s("div",{staticClass:"title"},[s("span",[t._v("工单名称")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-input",{staticClass:"task_new_input",attrs:{placeholder:"请输入工单名称",clearable:""},model:{value:t.task_params.name,callback:function(e){t.$set(t.task_params,"name",e)},expression:"task_params.name"}})],1),t._v(" "),s("li",{staticClass:"left_item"},[s("div",{staticClass:"title"},[s("span",[t._v("经办人")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-select",{staticClass:"task_new_input",attrs:{clearable:"",placeholder:"请选择经办人"},model:{value:t.task_params.operator,callback:function(e){t.$set(t.task_params,"operator",e)},expression:"task_params.operator"}},t._l(t.task_new.operator_list,function(e){return s("el-option",{key:e.id,attrs:{label:e.username,value:e.username},nativeOn:{click:function(a){return t.select_changced(e)}}})}),1)],1)]),t._v(" "),s("div",{staticClass:"content_top_right"},[s("li",{staticClass:"right_item"},[s("div",{staticClass:"title"},[s("span",[t._v("优先级")]),t._v(" "),s("span",{staticClass:"improtant_ico"},[t._v("*")])]),t._v(" "),s("el-select",{staticClass:"task_new_input",attrs:{clearable:"",placeholder:"请选择优先级"},model:{value:t.task_params.level,callback:function(e){t.$set(t.task_params,"level",e)},expression:"task_params.level"}},t._l(t.task_new.level_list,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("li",{staticClass:"right_item"},[s("el-checkbox-group",{model:{value:t.task_params.notice,callback:function(e){t.$set(t.task_params,"notice",e)},expression:"task_params.notice"}},[s("el-checkbox",{attrs:{label:"email",value:"email"}},[t._v("邮件通知")]),t._v(" "),s("el-checkbox",{attrs:{label:"message",value:"message"}},[t._v("短信通知")]),t._v(" "),s("el-checkbox",{attrs:{label:"news",value:"news"}},[t._v("消息中心通知")])],1)],1)])]),t._v(" "),s("div",{staticClass:"content_remarks"},[s("p",{staticClass:"title"},[t._v("备注")]),t._v(" "),s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.task_params.textarea,callback:function(e){t.$set(t.task_params,"textarea",e)},expression:"task_params.textarea"}})],1),t._v(" "),s("div",{staticClass:"content_table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.table_operator.tableData,align:"center",border:"","tooltip-effect":"dark"}},[s("el-table-column",{attrs:{prop:"username",align:"center",label:"经办人"}}),t._v(" "),s("el-table-column",{attrs:{prop:"department",align:"center",label:"部门"}}),t._v(" "),s("el-table-column",{attrs:{prop:"email_addr",align:"center",label:"邮箱"}})],1)],1)]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.closed_task_new}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"next_btn",on:{click:t.next_task_new}},[t._v("下一步")])],1)]):t._e(),t._v(" "),t.task.new_contet?t._e():s("div",{staticClass:"task_handle_content"},[s("div",{staticClass:"task_content_box"},[s("div",{staticClass:"table_box"},[s("ul",{staticClass:"table_box_title"},t._l(t.handle.table_title,function(e,a){return s("li",{class:{active:t.handle.active==a},on:{click:function(e){return t.table_btn_toggle(a)}}},[t._v("\n              "+t._s(e)+"\n            ")])}),0),t._v(" "),s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.handle.active,expression:"handle.active == 0"}]},[s("el-table",{staticClass:"common-table",attrs:{align:"center",border:"",data:t.table_alerts.tableData_new,"tooltip-effect":"dark"},on:{"selection-change":t.handle_sel_table_alerts}},[s("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"category",align:"center",label:"告警类型","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"indicator",align:"center",label:"威胁指标","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"application",align:"center",label:"应用","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"威胁等级",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"btn_alert_background",class:{high_background:"高"==e.row.degree,mid_background:"中"==e.row.degree,low_background:"低"==e.row.degree}},[t._v("\n                      "+t._s(t._f("degree_sino")(e.row.degree)))])]}}],null,!1,2445237788)}),t._v(" "),s("el-table-column",{attrs:{label:"失陷确定性",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:{fall_certainty:"1"==e.row.fall_certainty}},[t._v("\n                      "+t._s(t._f("certainty")(e.row.fall_certainty)))])]}}],null,!1,503520717)}),t._v(" "),s("el-table-column",{attrs:{label:"状态",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("alert_status")(e.row.status)))]}}],null,!1,1908041749)})],1),t._v(" "),s("el-pagination",{staticClass:"pagination_box",attrs:{"page-sizes":[10,20,50,100],"page-size":t.table_alerts.eachPage,"current-page":t.table_alerts.pageNow,total:t.table_alerts.count,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.sc_table_alerts,"current-change":t.hcc_table_alerts}})],1)])])]),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.closed_task_new}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle}},[t._v("上一步")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle_assign}},[t._v("分配")]),t._v(" "),s("el-button",{staticClass:"prev_btn",on:{click:t.prev_task_handle_save}},[t._v("保存")])],1)])]),t._v(" "),s("el-dialog",{staticClass:"pop_state_add pop_box",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:t.add_state_change},on:{"update:visible":function(e){t.add_state_change=e}}},[s("img",{staticClass:"closed_img",attrs:{src:a("6an9"),alt:""},on:{click:t.add_closed_state}}),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"mask"}),t._v(" "),s("span",{staticClass:"title_name"},[t._v("添加到工单")])]),t._v(" "),s("div",{staticClass:"content"},[s("el-row",{staticClass:"common-table-pattern"},[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table_add_works.loading,expression:"table_add_works.loading"}],staticClass:"common-table",attrs:{align:"center",border:"","tooltip-effect":"dark","highlight-current-row":"",data:t.table_add_works.tableData},on:{"selection-change":t.handle_sel_table_add_works}},[s("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",align:"center",label:"工单名称","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"creator",align:"center",label:"创建人","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"优先级",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("priority")(e.row.priority)))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"new_perator",align:"center",label:"经办人","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"状态",align:"center",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("work_status")(e.row.status)))]}}])})],1)],1),t._v(" "),s("el-col",{staticClass:"e-pagination",attrs:{span:24}},[s("el-pagination",{staticClass:"handle-pagination",attrs:{"page-sizes":[10,20,50,100],"page-size":t.table_add_works.eachPage,total:t.table_add_works.count,"current-page":t.table_add_works.pageNow,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.sc_table_add_works,"current-change":t.hcc_table_add_works}})],1)],1)],1),t._v(" "),s("div",{staticClass:"btn_box"},[s("el-button",{staticClass:"cancel_btn",on:{click:t.add_closed_state}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"ok_btn",on:{click:t.add_ok_state}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var i=function(t){a("udby")},n=a("VU/8")(s.a,l,!1,i,"data-v-7a8bf06c",null);e.default=n.exports},udby:function(t,e){}});